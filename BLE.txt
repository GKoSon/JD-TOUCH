     
#if 0      
      if( DEVICE_SW_VERSION != config.read(CFG_SYS_SW_VERSION , NULL) )
      {
           printf("<<<<<<<<<--------有升级任务-------->>>>>>>>>>>\r\n");
           xSemaphoreGive(xMqttOtaSemaphore);    
           int ver = DEVICE_SW_VERSION;
           config.write(CFG_SYS_SW_VERSION , &ver,1); 
      }
#endif   
beep.write(1);

需要一个万能重置密码201908

W5500如何修改MAC uint8_t w5500Mac[6]={0x00,0x08,0xdc,0x00,0x00,0x00};

void w5500_set_mac( void )
{
	
	uint8_t *deviceMac = NULL;
	
	config.read(CFG_BLE_MAC , (void **)&deviceMac);
	memcpy(w5500Mac+3 , deviceMac+3 , 3);
	
	setSHAR(w5500Mac);
	
}
BLE 第三行！！Bt receive command id = 14.设备恢复出厂设置
Bt receive command id = 14.
1404010203040506000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
[#][0%][19-08-12 12:29:30]设备恢复出厂设置

BLE 第一行：
[#][0%][19-08-12 11:26:35]Bt receive command id = 19.
1909010203040506000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000



下一步开始！


下一步
++++++++++++++开门测试Bt receive command id = 8.
[#][0%][19-08-12 12:36:11]Bt receive command id = 8.
0808010203040506000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000


安装的话6个OK最后一个失败
[#][0%][19-08-12 12:36:50]Bt receive command id = 13.
1303010203040506000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
[#][0%][19-08-12 12:36:50]蓝牙配对成功
[#][0%][19-08-12 12:36:51]Bt receive command id = 2.
0202010203040506000200000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
[#][0%][19-08-12 12:36:51]设置开门延时时间
[#][0%][19-08-12 12:36:51]设置开门延时 = 2000 
[#][0%][19-08-12 12:36:51]FLASH 擦写失败
[#][0%][19-08-12 12:36:51]Bt receive command id = 9.
0909010203040506000200000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
[#][0%][19-08-12 12:36:51]设置门磁报警时间
[#][0%][19-08-12 12:36:51]门磁报警时间 = 2min 
[#][0%][19-08-12 12:36:51]设置门磁输入初始化状态，STATUS = 1 
[#][0%][19-08-12 12:36:52]Bt receive command id = 4.
0404010203040506010203040506010202080107
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
[#][0%][19-08-12 12:36:52]New user secret is:122817
[#][0%][19-08-12 12:36:52]Bt receive command id = 3.
0303010203040506080701030104000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
[#][0%][19-08-12 12:36:52]New pair secret is:871314
[#][0%][19-08-12 12:36:53]Bt receive command id = 15.
1505080701030104000000000000000000000000
0000000000000000000000000000000000000000
00000000000000007B226465766963654E616D65
223A22474B6F536F6E222C226874747055726C22
3A223139322E3136382E36362E33343A38323131
222C226D71747455726C223A223139322E313638
2E36362E33343A33303031222C22697344484350
[#][0%][19-08-12 12:36:53]设置设备参数
BleSetDevicePara[{"deviceName":"GKoSon","httpUrl":"192.168.66.34:8211","mqttUrl":"192.168.66.34:3001","isDHCP":0,"ip":"192.168.66.29","mask":"255.255.255.0","gateway":"192.168.66.254","DNS":"210.22.84.3"}]
%【s】%【s】%【s】%【s】%【s】%【s】[#][0%][19-08-12 12:36:53]SIP: 0.13.248.224
[#][0%][19-08-12 12:36:53]GAR: 0.14.248.224
[#][0%][19-08-12 12:36:53]SUB: 0.13.248.224
[#][0%][19-08-12 12:36:53]DNS: 0.11.248.224
[#][0%][19-08-12 12:36:55]Bt receive command id = 16.
1606080701030104000000000000000000000000
0000000000000000000000000000000000000000
00000000000000007B226465766963654E616D65
223A22474B6F536F6E222C227374726565744944
223A223035343134316135393837363436353362
383463323030386134653532376263222C22636F
6D6D69747465654944223A223039333530376638
[#][0%][19-08-12 12:36:55]设置设备注册信息
BleSetDevicePara[{"deviceName":"GKoSon","streetID":"054141a598764653b84c2008a4e527bc","committeeID":"093507f86d1841ef864d4550e08651fb","villageID":"0e989b50a49711e98f8a878ebe027dbb","buildingID":"1f102700a49711e98f8a878ebe027dbb","longitude":121.5,"latitude":31.2,"seriesType":12,"productBrand":"?规𻐀?𺰢,"productName":"A9"}]
%【s】%【s】%【s】%【s】%【s】%【s】%【s】[#][0%][19-08-12 12:36:56]Bt receive command id = 16.

单独看15
{"deviceName":"GKoSon",
"httpUrl":"192.168.66.34:8211",
"mqttUrl":"192.168.66.34:3001",
"isDHCP":0,
"ip":"192.168.66.29",
"mask":"255.255.255.0",
"gateway":"192.168.66.254",
"DNS":"210.22.84.3
%【s】%【s】%【s】%【s】%【s】%【s】[#][0%][19-08-12 12:36:53]SIP: 0.13.248.224
1606080701030104000000000000000000000000
0000000000000000000000000000000000000000
00000000000000007B226465766963654E616D65
223A22474B6F536F6E222C227374726565744944
223A223035343134316135393837363436353362
383463323030386134653532376263222C22636F
6D6D69747465654944223A223039333530376638
[#][0%][19-08-12 12:36:56]设置设备注册信息

单独分析16
BleSetDevicePara
{"deviceName":"榫𼐿𷣨?𹐢,
"streetID":"054141a598764653b84c2008a4e527bc",
"committeeID":"093507f86d1841ef864d4550e08651fb",
"villageID":"0e989b50a49711e98f8a878ebe027dbb",
"buildingID":"5c4432e5b9c511e99e12131a65955291",
"longitude":121.5,"latitude":31.2,
"seriesType":12,
"productBrand":"?规𻐀?𺰢,
"productName":"A9"}】

【693】093507f86d1841ef864d4550e08651fb】
【697】0e989b50a49711e98f8a878ebe027dbb】
【700】5c4432e5b9c511e99e12131a65955291】
【704】121.500000】
【708】31.200000】
【712】12】
【717】A9】


我回答OK 它没有按键 继续过来1
[#][0%][19-08-12 13:36:40]Bt receive command id = 1.
010108070103010400000B090F00060B0B07000D
0000000001020000000000000000000000000000
0000000000000000000000000000000000000000
000000000B7C7D7E000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
0000000000000000000000000000000000000000
[#][0%][19-08-12 13:36:40]Device type:12 ,小区:b9f06b,楼栋:d00,单元:0
[#][0%][19-08-12 13:36:40]设置设备类型 = 2