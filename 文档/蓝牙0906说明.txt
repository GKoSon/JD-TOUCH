PART1
BleModuleAppDateType     BleModuleAppData;

è¿™ä¸ªæ˜¯æ¨¡ç»„è‡ªå¸¦çš„ æ¯”å¦‚ä½ å‘1ç»™è“ç‰™äº† è¿™ä¸ªè“ç‰™å‘ç»™å•ç‰‡æœºçš„ä¸æ˜¯1è€Œæ˜¯ä¸€ä¸ªå¦‚ä¸‹çš„ç»“æ„
__packed  typedef struct _AppDataHeard
{
    uint8_t FormAddr[6];
    uint16_t Handle;
    uint8_t  WriteType;
}AppDataHeardType;

typedef struct  _BleModuleAppMsgType
{
    AppDataHeardType hdr;
    uint8_t  Data[40];
    uint16_t DatLength;
}BleModuleAppMsgType;


typedef struct  _BleModuleAppData
{
    uint16_t                Command;
    uint8_t                 Response;
    uint16_t                Length;
    BleModuleAppMsgType     Msg;
    uint8_t                 BytePos;
}BleModuleAppDateType;


æ¯”å¦‚å‘â€œ123456â€
æ¨¡ç»„å‘ç»™mcuæ˜¯ i-t-a-z-Command-Response-Length-æ­¤æ—¶è¿›åˆ°æ•°æ®å£³å­ FormAddr-Handle-å¼€å§‹æ ¹æ®Lengthæ¥å—æ•°æ®

nordic app å‘é€ç¬¬ä¸€é¢UUID â€œ123456â€
4D-00-01-0F-00-68-97-BF-7E-8F-1D-F1-2A-00-31-32-33-34-35-36-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-06-00-0F-[0;37m[#][0%][17-11-24 08:37:19]GSMæ¨¡å—å…³æœºæˆåŠŸ

åˆ†æ
Command 4D-00-
Response 01-
Length 0F-00- ã€è¡¨ç¤ºåé¢çš„å…¨é•¿ æˆ‘è‡ªå·±çš„6+å…¶ä»–çš„6+2+1ã€‘

FormAddr 68-97-BF-7E-8F-1D-
Handle F1-2A-
WriteType 00-
Data 31-32-33-34-35-36-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-06-00-0F-[0;37m[#][0%][17-11-24 08:37:19]GSMæ¨¡å—å…³æœºæˆåŠŸ

å‘é€0X11
4D-00-
01-
0A-00-[10 ä¹Ÿå°±æ˜¯9+1]
5A-21-89-04-64-AB-
F1-2A-
00-

11


çœŸå®æµ‹è¯•:
4D-00-
01-
1D-00-[29 ä¹Ÿå°±æ˜¯9+20]

58-F0-ED-8B-2F-63-
F1-2A-
00-

02-02-00-10-08-C0-C4-07-10-01
18-C0-C4-07-20-BD-C4-F8-A0-D7

è¯´æ˜å°±ä¸€åŒ…è¿‡æ¥20ä¸ªï¼ï¼

é‚£ä¹ˆæˆ‘å»å›ç­”ä¸€ä¸‹






PART2
å¼€å§‹è§£æ

0906LOGåˆ†æ æ”¶åˆ°2åŒ…æ•°æ®

ç¬¬1åŒ…
4D-00-01-1D-00-5F-93-DD-CB-30-71-F1-2A-00- 03-03-21-10-08-C0-C4-07-18-C0-C4-07-20-A3-C8-85-F1-D7-2F-2A-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-14-00-0F-
ç¬¬2åŒ…
4D-00-01-19-00-5F-93-DD-CB-30-71-F1-2A-00- 03-03-22-0C-0B-31-32-33-34-35-36-37-38-39-30-30-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-10-00-0F-
è§£ææ¨¡ç»„éƒ¨åˆ†æ˜¯ã€ä¹Ÿå³æ˜¯æ‰‹æœºAPPæ ¹æœ¬ä¸çŸ¥é“çš„ æ˜¯æ¨¡ç»„0906è‡ªå·±æ·»åŠ çš„ã€‘
4D-00-
01-
1D-00-ã€ä»£è¡¨åæ–‡é•¿åº¦ã€‘
5F-93-DD-CB-30-71-
F1-2A-
00

åé¢çš„å°±æ˜¯APPå‘è¿‡æ¥çš„ å®ƒæ˜¯HEAD-BODYæˆ‘ä»¬çš„æ–‡æ¡£çº¦å®šçš„
ç¬¬1åŒ…
---HEAD:ID  0X03

---HEAD:CMD 0X03

---HEAD:SEQ 0X21

---HEAD:LEN 0X10

---BODY :  [08 C0 C4 07 18 C0 C4 07 20 A3 C8 85 F1 D7 2F 2A ]
ç¬¬1åŒ…
---HEAD:ID  0X03

---HEAD:CMD 0X03

---HEAD:SEQ 0X22

---HEAD:LEN 0X0C

---BODY :  [0B 31 32 33 34 35 36 37 38 39 30 30 ]

å¯ä»¥çœ‹åˆ°CMDéƒ½æ˜¯3 è¡¨ç¤ºå¼€é—¨çš„
SEQæ˜¯U8 æ˜¯4ï¼š4 è¡¨ç¤ºæ€»åŒ…æ•°ç›®ï¼šå½“å‰åŒ…çš„åºåˆ—å· ä¹Ÿå°±æ˜¯ä¸€å…±2åŒ… ç¬¬ä¸€åŒ…21 ç¬¬äºŒåŒ…22
æ‰€ä»¥è¿™ä¸ªæ˜¯æˆ‘ä»¬è§£æçš„å…³é”®
å½“0X22 0X33è¿™æ ·çš„æ—¶å€™ å°±è¡¨ç¤ºæ•°æ®å…¨éƒ¨å¥½äº†!

å¼€å§‹è§£æ
ä¹‹å‰çš„åšæ³•æ˜¯ç®€å•çš„ ç›´æ¥æ‹·è´
memset( &ble_app[0]      ,0 ,sizeof(BleProtData));

memcpy( &ble_app[0].hdr  ,&BleModuleAppData.Msg.hdr  ,sizeof(AppDataHeardType));
memcpy( &ble_app[0] ,&BleModuleAppData.Msg.Data ,BleModuleAppData.Msg.DatLength);
ble_app[0].alllen = 0xFF;
release_sig();      

ç°åœ¨éœ€è¦è®¾è®¡ä¸€ä¸‹ 



é—¨ç¦è®¡åˆ’
ä¸‰ä¸ªå»ºè®®
1---OTA å·²ç»åšäº†ZIP
2---æ”¾å¼ƒè“ç‰™ ç›´æ¥ä¸‹è½½é…ç½®æ–‡ä»¶ ç”¨JS
3---åˆ¶å¡å™¨ åšä¸Šé¢çš„è‰ç¨¿